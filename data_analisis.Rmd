---
title: "Mortalidad Historica"
author: "Federico Tricarico"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## Presentacion

...

### Import data

```{r}
data <- read.csv2("~/GitHub/mortalidad_historica/data/serie-historica-ocurrida-argentina-jurisdiccion-1914-2022.csv",
                  header = TRUE,
                  sep = ",")

data
```

Se estima que `indice_tiempo` es anual, y que cada columna contiene las defunciones por jurisdiccion. 

```{r}
names(data)
```
Y dado que son 26 columnas, se estima que la primera es el a単o, la segunda el total, y las restantes 24 cada una de las jurisdicciones.

Veamos los a単os, y la serie.

```{r}
unique(data$indice_tiempo)
```
Extraemos solo los a単os, o primero cuatro caracteres de la cadena

```{r}
data$anio <- substr(data$indice_tiempo, 1, 4)
unique(data$anio)

data$anio <- as.integer(data$anio)
class(data$anio)
```

```{r}
help(pivot_longer)
```


```{r}
data2 <- data |> 
  pivot_longer(cols = 2:26,
               names_to = "jurisdiccion",
               values_to = "def") |> 
  select(anio, jurisdiccion, def) |> 
  arrange()
data2
```
Ahora si tenemos, la defunciones (registros) por jurisdiccion y a単o (variables o campos).

### Dataviz

un grafico de ggplot funciona por capas

```{r}
grafico1 <- data2 |> 
  filter(jurisdiccion=="republica_argentina") |> 
  ggplot(aes(anio, def))+
  geom_bar(stat = "identity")+
  scale_y_continuous()
grafico1
```

